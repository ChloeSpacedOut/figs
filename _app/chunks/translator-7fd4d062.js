import{_ as b}from"./preload-helper-7fa5b643.js";import{w as c,d as T}from"./index-514aa2c7.js";let h=[],g="en_us";var u;{let i=localStorage.getItem("favourites");i!==null&&(h=i===""?[]:i.split(";")),g=(u=localStorage.getItem("locale"))!=null?u:"en_us"}let d=c({readerEnabled:!1,favourites:h,language:g});d.subscribe(i=>{localStorage.setItem("favourites",i.favourites.join(";")),localStorage.setItem("locale",i.language)});const f="Favourites",v="Content";var p={favourites:f,"hide-table":"Hide Table","show-table":"Show Table","disable-focus":"Disable Focus","enable-focus":"Enable Focus",content:v,"global-objects":"Global Objects","misc-types":"Miscellaneous Types","misc-enums":"Miscellaneous Enums"},S=Object.freeze(Object.defineProperty({__proto__:null,favourites:f,content:v,default:p},Symbol.toStringTag,{value:"Module"}));let _={"./figs/en_us.json":()=>b(()=>Promise.resolve().then(function(){return S}),void 0)},o={en_us:p},m=Object.entries(_);m.forEach(i=>{let e=i[0].split("/"),t=e[e.length-1].split(".")[0];t in o||(o[t]=async()=>(await i[1]()).default)});function l(i,e){return`${i}-${e}`}class L{constructor(e){this.cachedTranslations={},this.providers={},this.stores={},this.languageStore=e,this.currentLanguage="",this.activeTransfers=[],this.languageStore.subscribe(async t=>{t!==this.currentLanguage&&(this.currentLanguage=t,this.reloadQueue(),this.updateStores())})}reloadQueue(){if(this.currentLanguage!=="en_us"){let e=Object.entries(this.providers);for(let t=0;t<e.length;t++){let s=e[t],a=l(s[0],this.currentLanguage);this.currentLanguage in s[1]&&!(a in this.cachedTranslations||this.activeTransfers.includes(a))&&this.transfer(s[0])}}}async transfer(e){let t=this.currentLanguage,s=l(e,t);this.activeTransfers.push(s);let a,r=this.providers[e][t];typeof r=="function"?a=await r():a=r,this.cachedTranslations[s]=a,this.activeTransfers.splice(this.activeTransfers.findIndex(n=>n==s),1),t===this.currentLanguage&&this.updateStores()}updateStores(){let e=Object.entries(this.stores);for(let t=0;t<e.length;t++)e[t][1].set(this.getStoreValue(e[t][0]))}getStoreValue(e){let t=Object.entries(this.providers);for(let s=0;s<t.length;s++){let a=t[s],r=l(a[0],this.currentLanguage);if(r in this.cachedTranslations&&e in this.cachedTranslations[r])return{type:"RESULT",result:this.cachedTranslations[r][e]};if(r=l(a[0],"en_us"),r in this.cachedTranslations&&e in this.cachedTranslations[r])return{type:"FALLBACK",result:this.cachedTranslations[r][e]}}return this.activeTransfers.length>0?{type:"PROCESSING"}:{type:"NOTFOUND"}}getPresentableValue(e){let t=this.getStoreValue(e);return t.type==="RESULT"?t.result:e}addProvider(e,t){this.providers[t]=e;let s=l(t,"en_us");return this.cachedTranslations[s]=e.en_us,this.reloadQueue(),()=>this.removeProvider(t)}removeProvider(e){delete this.providers[e],this.reloadQueue()}createStore(e){if(e in this.stores)return this.stores[e];let t=c(this.getStoreValue(e),s=>(e in this.stores||(this.stores[e]=t,s(this.getStoreValue(e))),()=>{delete this.stores[e]}));return this.stores[e]=t,t}getAvailableLanguages(){let e=[],t=Object.values(this.providers);for(let s=0;s<t.length;s++){let a=t[s],r=Object.keys(a);for(let n=0;n<r.length;n++)e.includes(r[n])||e.push(r[n])}return e}}let j=new L(T(d,i=>i.language));j.addProvider(o,"figs");export{j as p,d as w};
