import{w as g,d as w,_ as c}from"./preload-helper-657f1be1.js";let d=[],f="en_us";var h;{let s=localStorage.getItem("favourites");s!==null&&(d=s===""?[]:s.split(";")),f=(h=localStorage.getItem("locale"))!=null?h:"en_us"}let p=g({readerEnabled:!1,favourites:d,language:f});p.subscribe(s=>{localStorage.setItem("favourites",s.favourites.join(";")),localStorage.setItem("locale",s.language)});const v="Favourites",b="Content",_="Search",T="Preferences";var u={favourites:v,"hide-table":"Hide Table","show-table":"Show Table","disable-focus":"Disable Focus","enable-focus":"Enable Focus",content:b,"global-objects":"Global Objects","misc-types":"Miscellaneous Types","misc-enums":"Miscellaneous Enums",search:_,"pick-a-version":"Pick a version","version-not-selected":"Version not selected","made-by-applejuice":"Made by applejuice","show-everything":"Show everything","show-not-everything":"Show not everything",preferences:T},j=Object.freeze(Object.defineProperty({__proto__:null,favourites:v,content:b,search:_,preferences:T,default:u},Symbol.toStringTag,{value:"Module"}));let P={"./figs/en_us.json":()=>c(()=>Promise.resolve().then(function(){return j}),void 0),"./figs/pt_pt.json":()=>c(()=>import("./pt_pt-a11316ab.js"),[])},o={en_us:u},O=Object.entries(P);O.forEach(s=>{let e=s[0].split("/"),t=e[e.length-1].split(".")[0];t in o||(o[t]=async()=>(await s[1]()).default)});function L(s){return s.replaceAll("u","uwu").replaceAll("d","w").replaceAll("b","w").replaceAll("g","w").replaceAll("t","w")+(Math.random()>.8?" >w<":" :3")}let S={};Object.entries(u).forEach(s=>{S[s[0]]=L(s[1])});o.en_uwu=()=>new Promise(s=>s(S));function l(s,e){return`${s}-${e}`}class y{constructor(e){this.cachedTranslations={},this.providers={},this.stores={},this.languageStore=e,this.currentLanguage="",this.activeTransfers=[],this.languageStore.subscribe(async t=>{t!==this.currentLanguage&&(this.currentLanguage=t,this.reloadQueue(),this.updateStores())})}reloadQueue(){if(this.currentLanguage!=="en_us"){let e=Object.entries(this.providers);for(let t=0;t<e.length;t++){let r=e[t],n=l(r[0],this.currentLanguage);this.currentLanguage in r[1]&&!(n in this.cachedTranslations||this.activeTransfers.includes(n))&&this.transfer(r[0])}}}async transfer(e){let t=this.currentLanguage,r=l(e,t);this.activeTransfers.push(r);let n,i=this.providers[e][t];if(typeof i=="function")try{n=await i()}catch(a){console.error(a),this.activeTransfers.splice(this.activeTransfers.findIndex(m=>m==r),1);return}else n=i;this.cachedTranslations[r]=n,this.activeTransfers.splice(this.activeTransfers.findIndex(a=>a==r),1),t===this.currentLanguage&&this.updateStores()}updateStores(){let e=Object.entries(this.stores);for(let t=0;t<e.length;t++)e[t][1].set(this.getStoreValue(e[t][0]))}getStoreValue(e){let t=Object.entries(this.providers);for(let r=0;r<t.length;r++){let n=t[r],i=l(n[0],this.currentLanguage);if(i in this.cachedTranslations&&e in this.cachedTranslations[i])return{type:"RESULT",result:this.cachedTranslations[i][e]};if(i=l(n[0],"en_us"),i in this.cachedTranslations&&e in this.cachedTranslations[i])return{type:"FALLBACK",result:this.cachedTranslations[i][e]}}return this.activeTransfers.length>0?{type:"PROCESSING"}:{type:"NOTFOUND"}}getPresentableValue(e){let t=this.getStoreValue(e);return this.getPresentableValueFromResult(t,e)}getPresentableValueFromResult(e,t){return e.type==="RESULT"?e.result:t}addProvider(e,t){this.providers[t]=e;let r=l(t,"en_us");return this.cachedTranslations[r]=e.en_us,this.reloadQueue(),()=>this.removeProvider(t)}removeProvider(e){delete this.providers[e],this.reloadQueue()}createStore(e){if(e in this.stores)return this.stores[e];let t=g(this.getStoreValue(e),r=>(e in this.stores||(this.stores[e]=t,r(this.getStoreValue(e))),()=>{delete this.stores[e]}));return this.stores[e]=t,t}getProviderStatistics(){let e={providers:Object.keys(this.providers),languages:{}},t=Object.entries(this.providers);for(let r=0;r<t.length;r++){let n=t[r],i=Object.keys(n[1]);for(let a=0;a<i.length;a++)i[a]in e.languages||(e.languages[i[a]]=[]),e.languages[i[a]].push(n[0])}return e}}let E=new y(w(p,s=>s.language));E.addProvider(o,"figs");export{E as p,p as w};
