import{_ as u}from"./preload-helper-7fa5b643.js";import{w as h,d as S}from"./index-f9f7e4b7.js";let g=[],d="en_us";var c;{let i=localStorage.getItem("favourites");i!==null&&(g=i===""?[]:i.split(";")),d=(c=localStorage.getItem("locale"))!=null?c:"en_us"}let f=h({readerEnabled:!1,favourites:g,language:d});f.subscribe(i=>{localStorage.setItem("favourites",i.favourites.join(";")),localStorage.setItem("locale",i.language)});const p="Favourites",v="Content",b="Search";var _={favourites:p,"hide-table":"Hide Table","show-table":"Show Table","disable-focus":"Disable Focus","enable-focus":"Enable Focus",content:v,"global-objects":"Global Objects","misc-types":"Miscellaneous Types","misc-enums":"Miscellaneous Enums",search:b},m=Object.freeze(Object.defineProperty({__proto__:null,favourites:p,content:v,search:b,default:_},Symbol.toStringTag,{value:"Module"}));let j={"./figs/en_us.json":()=>u(()=>Promise.resolve().then(function(){return m}),void 0),"./figs/pt_pt.json":()=>u(()=>import("./pt_pt-4cb30fbd.js"),[])},o={en_us:_},P=Object.entries(j);P.forEach(i=>{let e=i[0].split("/"),t=e[e.length-1].split(".")[0];t in o||(o[t]=async()=>(await i[1]()).default)});function l(i,e){return`${i}-${e}`}class L{constructor(e){this.cachedTranslations={},this.providers={},this.stores={},this.languageStore=e,this.currentLanguage="",this.activeTransfers=[],this.languageStore.subscribe(async t=>{t!==this.currentLanguage&&(this.currentLanguage=t,this.reloadQueue(),this.updateStores())})}reloadQueue(){if(this.currentLanguage!=="en_us"){let e=Object.entries(this.providers);for(let t=0;t<e.length;t++){let s=e[t],a=l(s[0],this.currentLanguage);this.currentLanguage in s[1]&&!(a in this.cachedTranslations||this.activeTransfers.includes(a))&&this.transfer(s[0])}}}async transfer(e){let t=this.currentLanguage,s=l(e,t);this.activeTransfers.push(s);let a,r=this.providers[e][t];if(typeof r=="function")try{a=await r()}catch(n){console.error(n),this.activeTransfers.splice(this.activeTransfers.findIndex(T=>T==s),1);return}else a=r;this.cachedTranslations[s]=a,this.activeTransfers.splice(this.activeTransfers.findIndex(n=>n==s),1),t===this.currentLanguage&&this.updateStores()}updateStores(){let e=Object.entries(this.stores);for(let t=0;t<e.length;t++)e[t][1].set(this.getStoreValue(e[t][0]))}getStoreValue(e){let t=Object.entries(this.providers);for(let s=0;s<t.length;s++){let a=t[s],r=l(a[0],this.currentLanguage);if(r in this.cachedTranslations&&e in this.cachedTranslations[r])return{type:"RESULT",result:this.cachedTranslations[r][e]};if(r=l(a[0],"en_us"),r in this.cachedTranslations&&e in this.cachedTranslations[r])return{type:"FALLBACK",result:this.cachedTranslations[r][e]}}return this.activeTransfers.length>0?{type:"PROCESSING"}:{type:"NOTFOUND"}}getPresentableValue(e){let t=this.getStoreValue(e);return this.getPresentableValueFromResult(t,e)}getPresentableValueFromResult(e,t){return e.type==="RESULT"?e.result:t}addProvider(e,t){this.providers[t]=e;let s=l(t,"en_us");return this.cachedTranslations[s]=e.en_us,this.reloadQueue(),()=>this.removeProvider(t)}removeProvider(e){delete this.providers[e],this.reloadQueue()}createStore(e){if(e in this.stores)return this.stores[e];let t=h(this.getStoreValue(e),s=>(e in this.stores||(this.stores[e]=t,s(this.getStoreValue(e))),()=>{delete this.stores[e]}));return this.stores[e]=t,t}getProviderStatistics(){let e={providers:Object.keys(this.providers),languages:{}},t=Object.entries(this.providers);for(let s=0;s<t.length;s++){let a=t[s],r=Object.keys(a[1]);for(let n=0;n<r.length;n++)r[n]in e.languages||(e.languages[r[n]]=[]),e.languages[r[n]].push(a[0])}return e}}let O=new L(S(f,i=>i.language));O.addProvider(o,"figs");export{O as p,f as w};
